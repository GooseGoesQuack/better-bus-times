<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>Better Bus Times</title>
</head>
<body>
    <!-- NAVBAR -->
    <div class="navbar">
        <div class="nav-container flex">
            <nav>
                <ul>
                    <li><a href="../index.html">BBT</a></li>
                </ul>
            </nav>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../busstops.html">Bus Stops</a></li>
                    <li><a href="../contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </div>  

    <!-- MAIN -->
    <div class="menu">
        <div class="menu-container flex">
            <div class="menu-nav">
                <a href="../busstops.html" style="text-decoration: none;">Stops</a> >
            </div>
            <div>
                <h1>Stanley Road</h1>
            </div>
            <div>
                <p>(E) towards Roundshaw</p>
            </div>
        </div>
    </div>

    <!-- STOP INFO-->
    <div class="stopinfo">
        <div class="stopinfo-container flex">
            <div class="departures flex">
                
            </div>
        </div>
    </div>
</body>
<script>
    function get_times() {
    $.ajax({
        type: 'GET',
        url:'https://api.tfl.gov.uk/Line/154/Arrivals/490012554E?modesFilter=tube&oysterOnly=false',
        dataType: 'json',
        success: function(data) {
            var sorted = data.sort(function(a, b) {
                if (a.timeToStation > b.timeToStation) {
                    return 1;
                }
                if (a.timeToStation < b.timeToStation) {
                    return -1;
                }
                return 0;
            });
            $.each(data, function(key, value) {
                var line = value.lineName;
                var destination = value.destinationName;
                var time = value.timeToStation;
                time = parseInt(time/60);
                time < 1 ? time = "Due" : time = time +" min";
                $("#times").append("<br>"+ line +" to "+ destination +" - "+ time)
            });
        }
    });
}
</script>
</html>